# Story 1.2: Value Rating Input Component

**Epic**: AI-Powered Content Library Enhancement
**Story ID**: 1.2
**Priority**: Medium
**Estimated Effort**: Small (2-3 hours)

---

## User Story

**As a** content curator,
**I want** to rate content on a 1-10 scale after reviewing it,
**so that** I can prioritize high-value content for future reference and implementation.

---

## Acceptance Criteria

1. ✅ Create ValueRatingInput component with 1-10 scale slider or star interface
2. ✅ Component displays current rating value numerically
3. ✅ Component allows clearing/unsetting rating (optional field)
4. ✅ Integration into Add/Edit Content modals
5. ✅ ContentCard displays rating badge when value_rating is set (e.g., "⭐ 8/10")
6. ✅ Details modal shows full rating with visual representation
7. ✅ Rating stored in content_library.value_rating field
8. ✅ Rating field is optional and can be added post-creation

---

## Integration Verification

**IV1**: Existing content without ratings displays correctly without errors
**IV2**: Rating updates trigger proper React Query cache invalidation
**IV3**: Rating component follows existing form field styling patterns

---

## Technical Implementation Details

### Component Structure
```tsx
// src/components/content/ValueRatingInput.tsx
interface ValueRatingInputProps {
  value: number | null
  onChange: (rating: number | null) => void
  label?: string
  showClear?: boolean
}
```

### UI Options (Choose One)

**Option A: Slider with Stars**
```tsx
// Range slider (1-10) with star icon and numeric display
<div>
  <label>Value Rating</label>
  <div className="flex items-center gap-3">
    <input type="range" min="1" max="10" value={value || 5} />
    <span className="text-yellow-500">⭐ {value}/10</span>
    {showClear && <button onClick={() => onChange(null)}>Clear</button>}
  </div>
</div>
```

**Option B: Number Buttons**
```tsx
// Clickable number buttons 1-10
<div className="flex gap-1">
  {[1,2,3,4,5,6,7,8,9,10].map(n => (
    <button
      key={n}
      className={value === n ? 'bg-yellow-500' : 'bg-gray-700'}
      onClick={() => onChange(n)}
    >
      {n}
    </button>
  ))}
</div>
```

---

## Display in Components

### Content Card Badge
```tsx
{content.value_rating && (
  <span className="inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs bg-yellow-900 text-yellow-300 border border-yellow-700">
    ⭐ {content.value_rating}/10
  </span>
)}
```

### Details Modal Display
```tsx
<div className="mb-4">
  <h3 className="text-sm font-medium text-gray-300 mb-2">Value Rating</h3>
  <div className="flex items-center gap-2">
    <div className="flex">
      {[...Array(10)].map((_, i) => (
        <Star
          key={i}
          className={i < (content.value_rating || 0)
            ? "w-5 h-5 text-yellow-500 fill-yellow-500"
            : "w-5 h-5 text-gray-600"
          }
        />
      ))}
    </div>
    <span className="text-white font-bold">{content.value_rating}/10</span>
  </div>
</div>
```

---

## Database Field

```sql
-- Already added to schema
value_rating INTEGER CHECK (value_rating >= 1 AND value_rating <= 10)
```

---

## UI Design Notes

### Color Palette
- Use yellow/gold theme for rating (matches star icon)
- bg-yellow-900, text-yellow-300, border-yellow-700 (dark mode)

### Interaction States
- Hover: Highlight number/star being hovered
- Active: Bold/filled for selected rating
- Disabled: Gray out when not editable

### Accessibility
- Label clearly states "Rate from 1-10"
- ARIA labels for screen readers
- Keyboard navigation support (arrow keys for slider)

---

## Testing Checklist

- [ ] Component renders with null value (unrated state)
- [ ] Component renders with value 1-10
- [ ] Slider updates value on drag
- [ ] Number buttons select correct rating
- [ ] Clear button resets to null
- [ ] Rating persists on save
- [ ] Card badge only shows when rating exists
- [ ] Details modal displays rating correctly
- [ ] Existing content without ratings doesn't error
- [ ] Rating validation prevents values outside 1-10

---

## Dependencies

- Lucide React icons (Star icon)
- Existing form styling patterns
- ContentItem type with value_rating field

---

## Files to Modify/Create

**New Files**:
- `src/components/content/ValueRatingInput.tsx`

**Modified Files**:
- `src/components/ContentLibrary.tsx` (add to Add/Edit modals, card display, details modal)
- `src/types/content.ts` (add value_rating to ContentItem interface)

---

## Definition of Done

- [ ] ValueRatingInput component created and tested
- [ ] Component integrated into Add Content modal
- [ ] Component integrated into Edit Content modal
- [ ] Rating badge displays on content cards
- [ ] Rating displays in details modal with stars
- [ ] Clear/unset functionality works
- [ ] value_rating saves to database
- [ ] All integration verification tests pass
- [ ] Code reviewed and merged

---

**Story Status**: Ready for Development
**Assigned To**: TBD
**Started**: TBD
**Completed**: TBD
