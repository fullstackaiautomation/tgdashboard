# Story CL-1.1: Dashboard Areas Multi-Select Component

## Status
Draft

## Story
**As a** TG Dashboard user,
**I want** to tag content with relevant dashboard areas (businesses + life areas),
**so that** I can organize content by where it applies in my life and business.

## Acceptance Criteria
1. Create DashboardAreaSelector component that displays multi-select chips
2. Component fetches business entities from `businesses` table via Supabase
3. Component includes hardcoded life areas: Health, Life, Finance, Golf
4. Business chips display with their associated color from businesses table
5. Life area chips use distinct color palette (Health: green, Finance: blue, Life: purple, Golf: yellow)
6. Selected areas stored as array in content_library.dashboard_areas field
7. Component integrated into Add/Edit Content modals
8. Component allows adding/removing areas with visual feedback

## Tasks / Subtasks
- [ ] Task 1: Create DashboardAreaSelector component (AC: 1, 5, 8)
  - [ ] Create src/components/content/DashboardAreaSelector.tsx
  - [ ] Define DashboardAreaSelectorProps interface (selectedAreas, onChange, className)
  - [ ] Create LIFE_AREAS constant with Health, Life, Finance, Golf configurations
  - [ ] Implement chip display UI with rounded-full badges
  - [ ] Add click-to-add area from dropdown/list
  - [ ] Add X button on chips for removal
  - [ ] Apply background colors based on area type
  - [ ] Add visual hover states
- [ ] Task 2: Implement business entities fetching (AC: 2, 4)
  - [ ] Create useQuery hook to fetch businesses from Supabase
  - [ ] Query businesses table selecting id, name, color fields
  - [ ] Order businesses by name
  - [ ] Handle loading state with skeleton UI
  - [ ] Handle error state with error message
  - [ ] Apply business colors from database to chips
- [ ] Task 3: Integrate component into ContentLibrary modals (AC: 7)
  - [ ] Add DashboardAreaSelector to Add Content modal
  - [ ] Add DashboardAreaSelector to Edit Content modal
  - [ ] Wire up selectedAreas state to component
  - [ ] Wire up onChange handler to update form state
  - [ ] Test selection persists through modal lifecycle
- [ ] Task 4: Update ContentItem type and database operations (AC: 6)
  - [ ] Add dashboard_areas: string[] to ContentItem interface in src/types/content.ts
  - [ ] Update Supabase insert operation to include dashboard_areas
  - [ ] Update Supabase update operation to include dashboard_areas
  - [ ] Test saving content with dashboard_areas array
- [ ] Task 5: Handle null/empty arrays for backward compatibility (IV1)
  - [ ] Test existing content items without dashboard_areas display correctly
  - [ ] Add null/undefined handling in component
  - [ ] Add empty array handling in component
  - [ ] Verify no errors when dashboard_areas is missing

## Dev Notes

### Previous Story Insights
No previous Content Library stories. This is Story CL-1.1 - first story in Content Library Enhancement Epic.

### Architecture Context

**Tech Stack:** [Source: docs/ui-architecture/2-frontend-tech-stack.md]
- Frontend: React 19.1.1 + TypeScript 5.9.3
- Build Tool: Vite 7.1.7
- Styling: Tailwind CSS 3.4.1
- State Management: TanStack Query (React Query) 5.90.2
- Backend: Supabase (PostgreSQL + Auth)
- Icons: Lucide React 0.544.0

**Component Standards:** [Source: docs/ui-architecture/4-component-standards.md]
- PascalCase for component files: DashboardAreaSelector.tsx
- Functional components with React hooks
- React Query for server state
- Props interfaces defined in component file

**Project Structure:** [Source: docs/ui-architecture/3-project-structure.md]
- Components in src/components/content/ directory
- Types in src/types/content.ts (NOT .tsx)
- Existing ContentLibrary.tsx component to modify

### Integration Verification

**IV1**: Verify existing content items without dashboard_areas still display correctly (null/empty array handling)
**IV2**: Confirm businesses table query uses existing Supabase client patterns and auth context
**IV3**: Test that saving content with dashboard_areas doesn't break existing filter/search functionality

### Technical Details

**Data Structure:**
```typescript
// dashboard_areas array format:
// Business IDs: UUID strings from businesses table
// Life areas: literal strings "Health", "Life", "Finance", "Golf"
// Example: ["11111111-1111-1111-1111-111111111111", "Health", "Finance"]
```

**Life Areas Configuration:**
```typescript
const LIFE_AREAS = [
  { id: 'Health', name: 'Health', color: '#10b981' },
  { id: 'Finance', name: 'Finance', color: '#3b82f6' },
  { id: 'Life', name: 'Life', color: '#a855f7' },
  { id: 'Golf', name: 'Golf', color: '#eab308' }
]
```

### Testing Notes
- Component must handle null/undefined selectedAreas
- Multiple areas can be selected simultaneously
- Businesses load from Supabase with existing auth patterns
- Chip colors match specification
- Selection state persists on modal close/reopen

---

## Dev Agent Record

### Agent Model Used
- None yet

### Debug Log References
- None yet

### Completion Notes
- None yet

### File List
*Files created or modified during story implementation will be listed here*

### Change Log
| Date | Change | Notes |
|------|--------|-------|
| 2025-10-08 | Story created | Initial draft from PRD |
