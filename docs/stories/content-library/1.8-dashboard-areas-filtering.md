# Story 1.8: Dashboard Areas Filtering

**Epic**: AI-Powered Content Library Enhancement
**Story ID**: 1.8
**Priority**: Medium
**Estimated Effort**: Medium (4-5 hours)

---

## User Story

**As a** user organizing content across multiple life areas,
**I want** to filter content by dashboard areas,
**so that** I can focus on content relevant to specific businesses or life domains.

---

## Acceptance Criteria

1. ✅ Add "Dashboard Areas" filter section to existing filter panel
2. ✅ Display checkboxes for all businesses (dynamically loaded from businesses table)
3. ✅ Display checkboxes for life areas (Health, Life, Finance, Golf)
4. ✅ Filter logic uses PostgreSQL array containment query (@> operator)
5. ✅ Multiple dashboard areas can be selected (OR logic - show content tagged with any selected area)
6. ✅ Filter state persists during session
7. ✅ Active filters display count badge on filter button
8. ✅ "Clear filters" functionality includes dashboard areas

---

## Integration Verification

**IV1**: Dashboard area filtering works alongside existing filters (source, category, status, etc.)
**IV2**: Filter queries use GIN index on dashboard_areas for performance
**IV3**: Filtered results display correctly in Pinterest grid layout

---

## Implementation Notes

### Add Filter Section
```tsx
{/* In filter panel */}
<div>
  <label className="block text-sm font-medium text-gray-300 mb-2">Dashboard Areas</label>

  <div className="space-y-2 mb-4">
    <p className="text-xs text-gray-400">Businesses</p>
    {businesses?.map(business => (
      <label key={business.id} className="flex items-center gap-2">
        <input
          type="checkbox"
          checked={filters.dashboard_areas?.includes(business.id)}
          onChange={(e) => handleDashboardAreaToggle(business.id, e.target.checked)}
          className="rounded border-gray-600"
        />
        <span className="text-sm text-gray-300">{business.name}</span>
      </label>
    ))}
  </div>

  <div className="space-y-2">
    <p className="text-xs text-gray-400">Life Areas</p>
    {['Health', 'Life', 'Finance', 'Golf'].map(area => (
      <label key={area} className="flex items-center gap-2">
        <input
          type="checkbox"
          checked={filters.dashboard_areas?.includes(area)}
          onChange={(e) => handleDashboardAreaToggle(area, e.target.checked)}
          className="rounded border-gray-600"
        />
        <span className="text-sm text-gray-300">{area}</span>
      </label>
    ))}
  </div>
</div>
```

### Filter Logic
```typescript
const applyFilters = () => {
  let filtered = [...contents]

  // Dashboard Areas filter (OR logic - show if ANY selected area matches)
  if (filters.dashboard_areas && filters.dashboard_areas.length > 0) {
    filtered = filtered.filter(item =>
      item.dashboard_areas?.some(area => filters.dashboard_areas!.includes(area))
    )
  }

  // ... other filters

  setFilteredContents(filtered)
}
```

### Database Query (if filtering server-side)
```typescript
let query = supabase
  .from('content_library')
  .select('*')

if (filters.dashboard_areas && filters.dashboard_areas.length > 0) {
  query = query.overlaps('dashboard_areas', filters.dashboard_areas)
}
```

---

## Files to Modify

- `src/components/ContentLibrary.tsx` (filter panel, applyFilters function)
- `src/types/content.ts` (add dashboard_areas to ContentFilter interface)

---

## Definition of Done

- [ ] Dashboard Areas filter section added
- [ ] Business checkboxes load dynamically
- [ ] Life area checkboxes displayed
- [ ] Filter logic uses array containment
- [ ] Multiple selections work (OR logic)
- [ ] Filter state persists during session
- [ ] Active filter count badge updates
- [ ] Clear filters resets dashboard areas
- [ ] All integration verification tests pass

---

**Story Status**: Ready for Development (depends on Story 1.1)
**Assigned To**: TBD
